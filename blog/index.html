<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TopKino — Блог о кино, новости и обзоры</title>
  <meta name="description" content="Последние новости кино, обзоры фильмов и статьи о мире кино на TopKino. Читай блог и будь в курсе самых интересных новинок." />
  <meta name="keywords" content="блог кино, обзоры фильмов, новости кино, статьи о кино, TopKino" />
  <meta name="robots" content="index, follow" />
  <link rel="canonical" href="https://topkino.netlify.app/blog/index.html" />
  <style>
    /* Твои стили без изменений */
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #111;
      color: #eee;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      line-height: 1.5;
    }
    header {
      position: sticky;
      top: 0;
      background: #222;
      padding: 10px 15px;
      z-index: 1000;
      box-shadow: 0 2px 6px rgba(0,0,0,0.7);
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
    }
    header h1 {
      margin: 0;
      font-size: 1.5rem;
      flex-grow: 1;
      color: #00aaff;
      user-select: none;
    }
    nav {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }
    .dropbtn {
      background: #444;
      color: white;
      padding: 8px 16px;
      font-size: 0.95rem;
      border: none;
      border-radius: 18px;
      cursor: pointer;
      user-select: none;
      transition: background-color 0.3s;
    }
    .dropbtn:hover,
    .dropbtn.active {
      background-color: #00aaff;
    }
    .dropdown {
      position: relative;
    }
    .dropdown-content {
      display: none;
      position: absolute;
      background-color: #333;
      min-width: 180px;
      max-height: 250px;
      overflow-y: auto;
      box-shadow: 0 8px 16px rgba(0,0,0,0.7);
      z-index: 10;
      border-radius: 6px;
      margin-top: 6px;
      scrollbar-width: thin;
      scrollbar-color: #00aaff transparent;
    }
    .dropdown-content::-webkit-scrollbar {
      width: 6px;
    }
    .dropdown-content::-webkit-scrollbar-thumb {
      background-color: #00aaff;
      border-radius: 4px;
    }
    .dropdown-content button {
      color: white;
      padding: 10px 16px;
      text-align: left;
      background: none;
      border: none;
      width: 100%;
      font-size: 0.9rem;
      cursor: pointer;
      user-select: none;
      transition: background-color 0.3s;
    }
    .dropdown-content button:hover,
    .dropdown-content button.active {
      background-color: #00aaff;
    }
    .show {
      display: block;
    }
    main {
      max-width: 1200px;
      margin: 20px auto;
      padding: 0 15px;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      gap: 15px;
    }
    .post-card {
      background: #1d1d1d;
      border-radius: 8px;
      box-shadow: 0 0 6px rgba(0,0,0,0.6);
      overflow: hidden;
      text-decoration: none;
      color: #eee;
      user-select: none;
      transition: transform 0.3s, box-shadow 0.3s;
      display: flex;
      flex-direction: column;
    }
    .post-card:hover {
      transform: scale(1.05);
      box-shadow: 0 0 12px #00aaff;
    }
    .post-image {
      width: 100%;
      height: 140px;
      object-fit: cover;
      border-bottom: 1px solid #222;
    }
    .post-title {
      padding: 10px 12px;
      font-size: 1.1rem;
      flex-grow: 1;
    }
    .post-excerpt {
      padding: 0 12px 12px;
      font-size: 0.9rem;
      color: #ccc;
    }
    footer {
      text-align: center;
      padding: 15px;
      background: #222;
      color: #aaa;
      font-size: 0.8rem;
      user-select: none;
      margin-top: 30px;
    }
    .seo-text {
      max-width: 900px;
      margin: 40px auto;
      padding: 20px;
      background: #1a1a1a;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0,0,0,0.3);
      line-height: 1.6;
      color: #ddd;
      font-size: 1rem;
    }
    .seo-text h2 {
      margin-top: 0;
      color: #00aaff;
      text-align: center;
    }
    @media (max-width: 768px) {
      header h1 {
        font-size: 1.3rem;
      }
      .dropbtn {
        padding: 8px 12px;
        font-size: 0.85rem;
      }
      main {
        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      }
      .post-image {
        height: 120px;
      }
    }
    @media (max-width: 480px) {
      header {
        justify-content: center;
        gap: 10px;
      }
      header h1 {
        font-size: 1.1rem;
      }
      .dropbtn {
        padding: 7px 10px;
        font-size: 0.75rem;
      }
      main {
        grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
        gap: 10px;
      }
      .post-image {
        height: 100px;
      }
    }
  </style>
</head>
<body>

<header>
  <h1>TopKino</h1>
  <nav>
    <button class="dropbtn" id="btn-popular" onclick="window.location.href='/'" aria-label="Популярные фильмы">Популярные фильмы</button>

    <button class="dropbtn active" id="btn-blog" onclick="window.location.href='/blog/index.html'" aria-current="page">Блог</button>

    <div class="dropdown" id="year-dropdown">
      <button class="dropbtn" onclick="toggleDropdown('year-menu')" aria-haspopup="true" aria-expanded="false">Фильмы по годам ⮟</button>
      <div class="dropdown-content" id="year-menu" role="menu" aria-label="Года фильмов"></div>
    </div>

    <div class="dropdown" id="genre-dropdown">
      <button class="dropbtn" onclick="toggleDropdown('genre-menu')" aria-haspopup="true" aria-expanded="false">Жанры ⮟</button>
      <div class="dropdown-content" id="genre-menu" role="menu" aria-label="Жанры фильмов"></div>
    </div>
  </nav>
</header>

  <section style="max-width:1200px; margin: 30px auto 15px; padding: 0 15px; color: #00aaff;">
  <h1 style="margin: 0 0 8px; font-size: 2rem;">Блог о кино — новости, обзоры и статьи</h1>
  <p style="margin: 0; font-size: 1.1rem; color: #ccc;">
    Здесь вы найдете свежие новости киноиндустрии, подробные обзоры новых фильмов и интересные статьи для настоящих киноманов.
  </p>
</section>

<main id="posts-container" role="main" aria-label="Список статей блога">
  <!-- Здесь скрипт подгрузит карточки -->
</main>

<section class="seo-text" aria-label="SEO текст">
  <h2>Новости кино и интересные статьи в блоге TopKino</h2>
  <p>Добро пожаловать в блог TopKino — ваш источник свежих новостей киноиндустрии, обзоров новых фильмов и глубоких статей о киноискусстве. Мы тщательно отбираем контент, чтобы вы всегда были в курсе последних новинок и трендов.</p>
  <p>В нашем блоге вы найдете подробные рецензии, аналитику, интервью с актерами и режиссерами, а также советы для киноманов. Наши материалы написаны с любовью и профессионализмом, чтобы каждый посетитель получил максимум пользы и удовольствия.</p>
  <p>Следите за обновлениями, делитесь понравившимися статьями и погружайтесь в захватывающий мир кино вместе с TopKino!</p>
</section>

<footer>
  © 2025 TopKino. Все права защищены.
</footer>

<script>
  function toggleDropdown(id) {
    const menu = document.getElementById(id);
    if (!menu) return;

    document.querySelectorAll('.dropdown-content').forEach(dc => {
      if (dc !== menu) dc.classList.remove('show');
    });

    menu.classList.toggle('show');

    document.querySelectorAll('.dropdown > button').forEach(btn => {
      const expanded = btn.nextElementSibling.classList.contains('show');
      btn.setAttribute('aria-expanded', expanded ? 'true' : 'false');
    });
  }

  function populateYears() {
    const yearMenu = document.getElementById('year-menu');
    yearMenu.innerHTML = '';

    const currentYear = new Date().getFullYear();
    const startYear = currentYear - 9;

    const allBtn = document.createElement('button');
    allBtn.textContent = 'Все года';
    allBtn.classList.add('active');
    allBtn.onclick = () => {
      alert('Функция фильтрации по годам пока не реализована.');
      closeAllDropdowns();
    };
    yearMenu.appendChild(allBtn);

    for(let y = currentYear; y >= startYear; y--) {
      const btn = document.createElement('button');
      btn.textContent = y;
      btn.onclick = () => {
        alert(`Функция фильтрации по году ${y} пока не реализована.`);
        closeAllDropdowns();
      };
      yearMenu.appendChild(btn);
    }
  }

  async function fetchGenres() {
    const genreMenu = document.getElementById('genre-menu');
    try {
      const res = await fetch(`https://api.themoviedb.org/3/genre/movie/list?api_key=7cb67565ace3a08cd9d099c749787121&language=ru-RU`);
      if (!res.ok) throw new Error('Ошибка загрузки жанров');
      const data = await res.json();
      genreMenu.innerHTML = '';

      const allBtn = document.createElement('button');
      allBtn.textContent = 'Все жанры';
      allBtn.classList.add('active');
      allBtn.onclick = () => {
        alert('Функция фильтрации по жанрам пока не реализована.');
        closeAllDropdowns();
      };
      genreMenu.appendChild(allBtn);

      data.genres.forEach(genre => {
        const btn = document.createElement('button');
        btn.textContent = genre.name;
        btn.onclick = () => {
          alert(`Функция фильтрации по жанру "${genre.name}" пока не реализована.`);
          closeAllDropdowns();
        };
        genreMenu.appendChild(btn);
      });

    } catch (e) {
      genreMenu.innerHTML = '<div style="padding: 10px; color: #f00;">Ошибка загрузки жанров</div>';
      console.error(e);
    }
  }

  function closeAllDropdowns() {
    document.querySelectorAll('.dropdown-content').forEach(dc => dc.classList.remove('show'));
  }

  window.onclick = function(event) {
    if (!event.target.matches('.dropbtn')) {
      closeAllDropdowns();
    }
  }

  // ======== Список статей для подгрузки =========
  const articles = [
    { url: 'karate-kid-2025.html' },
    { url: 'some-other-article.html' }
  ];

  async function fetchArticleData(url) {
    try {
      const res = await fetch(url);
      if (!res.ok) throw new Error(`Ошибка загрузки: ${url}`);
      const text = await res.text();
      const parser = new DOMParser();
      const doc = parser.parseFromString(text, 'text/html');

      // Заголовок: берем og:title, иначе <title>
      const title = doc.querySelector('meta[property="og:title"]')?.content
                  || doc.querySelector('title')?.textContent
                  || 'Без названия';

      // Описание: og:description или meta description
      const description = doc.querySelector('meta[property="og:description"]')?.content
                        || doc.querySelector('meta[name="description"]')?.content
                        || 'Описание отсутствует';

      // Картинка: og:image, иначе первая картинка статьи/main/img
      let image = doc.querySelector('meta[property="og:image"]')?.content;
      if (!image) {
        const imgEl = doc.querySelector('article img, main img, img');
        if (imgEl) image = imgEl.src || imgEl.getAttribute('src');
      }
      if (!image) {
        image = 'https://via.placeholder.com/300x140?text=No+Image';
      }

      // Можно, если нужно, добавить дату публикации и модификации (например, meta[name="date"] или другие)
      const datePublished = doc.querySelector('meta[name="datePublished"]')?.content
                          || doc.querySelector('meta[property="article:published_time"]')?.content
                          || '';

      const dateModified = doc.querySelector('meta[name="dateModified"]')?.content
                          || doc.querySelector('meta[property="article:modified_time"]')?.content
                          || datePublished;

      return { title, description, image, url, datePublished, dateModified };
    } catch (e) {
      console.error('Ошибка при загрузке статьи:', url, e);
      return null;
    }
  }

  async function renderPosts() {
    const container = document.getElementById('posts-container');
    container.innerHTML = ''; // очистить перед добавлением

    for (const article of articles) {
      const data = await fetchArticleData(article.url);
      if (!data) continue;

      const articleEl = document.createElement('article');
      articleEl.className = 'post-card';
      articleEl.setAttribute('itemscope', '');
      articleEl.setAttribute('itemtype', 'https://schema.org/Article');

      articleEl.innerHTML = `
        <a href="${data.url}" itemprop="url" title="${data.title}">
          <img src="${data.image}" alt="${data.title}" class="post-image" itemprop="image" loading="lazy" />
          <h2 class="post-title" itemprop="headline">${data.title}</h2>
          <p class="post-excerpt" itemprop="description">${data.description}</p>
          <meta itemprop="author" content="TopKino" />
          ${data.datePublished ? `<meta itemprop="datePublished" content="${data.datePublished}"/>` : ''}
          ${data.dateModified ? `<meta itemprop="dateModified" content="${data.dateModified}"/>` : ''}
          <meta itemprop="publisher" content="TopKino" />
        </a>
      `;
      container.appendChild(articleEl);
    }
  }

  // Инициализация
  document.addEventListener('DOMContentLoaded', () => {
    populateYears();
    fetchGenres();
    renderPosts();
  });
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebSite",
      "@id": "https://topkino.netlify.app/#website",
      "url": "https://topkino.netlify.app/",
      "name": "TopKino",
      "publisher": {
        "@type": "Organization",
        "name": "TopKino"
      }
    },
    {
      "@type": "CollectionPage",
      "name": "Блог о кино — статьи и новости | TopKino",
      "url": "https://topkino.netlify.app/blog/index.html",
      "description": "Блог с новостями, обзорами и статьями о кино на TopKino.",
      "breadcrumb": {
        "@type": "BreadcrumbList",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "Главная",
            "item": "https://topkino.netlify.app/"
          },
          {
            "@type": "ListItem",
            "position": 2,
            "name": "Блог",
            "item": "https://topkino.netlify.app/blog/index.html"
          }
        ]
      }
    },
    {
      "@type": "Article",
      "headline": "Обзор фильма Карате Кид 2025",
      "image": "https://image.tmdb.org/t/p/w300/your_image_path.jpg",
      "author": {
        "@type": "Organization",
        "name": "TopKino"
      },
      "publisher": {
        "@type": "Organization",
        "name": "TopKino"
      },
      "datePublished": "2025-06-22",
      "dateModified": "2025-06-22",
      "url": "https://topkino.netlify.app/blog/karate-kid-2025.html",
      "description": "Подробный разбор нового фильма \"Карате Кид 2025\", актеры, сюжет и мнение критиков."
    },
    {
      "@type": "Article",
      "headline": "Другая статья блога",
      "image": "https://via.placeholder.com/300x140?text=No+Image",
      "author": {
        "@type": "Organization",
        "name": "TopKino"
      },
      "publisher": {
        "@type": "Organization",
        "name": "TopKino"
      },
      "datePublished": "2025-06-01",
      "dateModified": "2025-06-01",
      "url": "https://topkino.netlify.app/blog/some-other-article.html",
      "description": "Краткое описание другой интересной статьи на нашем кино-блоге."
    }
  ]
}
</script>

</body>
</html>
