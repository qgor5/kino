<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TopKino — Блог о кино, новости и обзоры</title>
  <meta name="description" content="Последние новости кино, обзоры фильмов и статьи о мире кино на TopKino." />
  <style>
    /* Кратко стили, чтобы карточки красиво отображались */
    body {
      background: #111;
      color: #eee;
      font-family: Arial, sans-serif;
      margin: 0; padding: 15px;
    }
    main {
      max-width: 1200px;
      margin: auto;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(240px,1fr));
      gap: 15px;
    }
    .post-card {
      background: #1d1d1d;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 0 6px rgba(0,0,0,0.6);
      display: flex;
      flex-direction: column;
      text-decoration: none;
      color: #eee;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .post-card:hover {
      transform: scale(1.05);
      box-shadow: 0 0 12px #00aaff;
    }
    .post-image {
      width: 100%;
      height: 140px;
      object-fit: cover;
      border-bottom: 1px solid #222;
    }
    .post-title {
      padding: 10px 12px;
      font-size: 1.1rem;
      font-weight: bold;
      flex-grow: 1;
    }
    .post-excerpt {
      padding: 0 12px 12px;
      font-size: 0.9rem;
      color: #ccc;
    }
    .post-date {
      padding: 0 12px 12px;
      font-size: 0.8rem;
      color: #666;
      font-style: italic;
    }
  </style>
</head>
<body>

  <h1>Блог TopKino — последние статьи</h1>
  <main id="posts-container" aria-live="polite" aria-label="Список статей блога">
    <!-- Карточки появятся здесь -->
  </main>

<script>
  // Список статей — файлы из папки /blog/
  const articlesList = [
    'karate-kid-2025.html',
    'some-other-article.html'
    // Добавляй сюда имена файлов статей
  ];

  const container = document.getElementById('posts-container');

  async function loadArticleMeta(url) {
    try {
      const res = await fetch(url);
      if (!res.ok) throw new Error(`Ошибка загрузки: ${url}`);
      const text = await res.text();

      // Парсим HTML как DOM
      const parser = new DOMParser();
      const doc = parser.parseFromString(text, 'text/html');

      // Читаем теги meta для данных
      const title = doc.querySelector('meta[property="og:title"]')?.content
                    || doc.querySelector('title')?.textContent
                    || 'Без названия';

      const description = doc.querySelector('meta[name="description"]')?.content
                          || doc.querySelector('meta[property="og:description"]')?.content
                          || 'Описание отсутствует';

      const image = doc.querySelector('meta[property="og:image"]')?.content
                    || 'https://via.placeholder.com/300x140?text=No+Image';

      const datePublished = doc.querySelector('meta[itemprop="datePublished"]')?.content
                            || doc.querySelector('meta[name="date"]')?.content
                            || '';

      return { title, description, image, url, datePublished };
    } catch(e) {
      console.error(e);
      return null;
    }
  }

  function createPostCard({title, description, image, url, datePublished}) {
    const a = document.createElement('a');
    a.className = 'post-card';
    a.href = url;
    a.title = title;
    a.setAttribute('itemtype', 'https://schema.org/Article');
    a.setAttribute('itemscope', '');
    a.setAttribute('itemprop', 'url');

    const img = document.createElement('img');
    img.className = 'post-image';
    img.src = image;
    img.alt = title;
    img.setAttribute('itemprop', 'image');

    const h2 = document.createElement('h2');
    h2.className = 'post-title';
    h2.textContent = title;
    h2.setAttribute('itemprop', 'headline');

    const pDesc = document.createElement('p');
    pDesc.className = 'post-excerpt';
    pDesc.textContent = description;
    pDesc.setAttribute('itemprop', 'description');

    a.appendChild(img);
    a.appendChild(h2);
    a.appendChild(pDesc);

    if(datePublished) {
      const pDate = document.createElement('p');
      pDate.className = 'post-date';
      pDate.textContent = `Опубликовано: ${new Date(datePublished).toLocaleDateString('ru-RU')}`;
      a.appendChild(pDate);
    }

    return a;
  }

  async function init() {
    for(const article of articlesList) {
      const meta = await loadArticleMeta('/blog/' + article);
      if(meta) {
        const card = createPostCard(meta);
        container.appendChild(card);
      }
    }
  }

  init();
</script>

</body>
</html>
